---
# TODO: quite a hack, and only working with 200GB
- name: which is the filesystem with 200GB
  shell: lsblk --sort size --json | jq -r '.blockdevices[1:][] | select(.size == "200G").name'
  register: blk_to_format

- name: create a ext3 filesystem on {{ blk_to_format.stdout }}
  filesystem:
    fstype: ext3
    dev: /dev/{{ blk_to_format.stdout }}

- name: create input folder
  file: 
    path: /home/{{ my_user }}/processing
    state: directory
    mode: '0700'

- name: mount ssd
  mount:
   path: /home{{ my_user }}/processing
   src: /dev/{{ blk_to_format.stdout }}
   fstype: ext3
   state: present
